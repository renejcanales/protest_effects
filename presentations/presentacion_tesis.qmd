---
pagetitle: "Presentación Tesis"
Author: René Canales
lang: es
knitr:
  opts_chunk:
    collapse: true
    comment: "#>"
    R.options:
      knitr.graphics.auto_pdf: true
format:
  revealjs:
    #logo: images/puc.png
    slide-number: true
    theme: "libs/tesis.scss"
    auto-stretch: false
    title-slide-attributes:
      visibility: false
    transition: fade
    transition-speed: slow
    # Ajustes para mejor separación y tamaño
    width: 1280
    height: 720
    margin: 0.1
    min-scale: 0.2
    max-scale: 2.0
    center: true
    # data-background-image: images/cover.jpg
    # data-background-size: cover
    auto-play-media: true
    mathjax: "default"
    # Configuración adicional para mejor presentación
    slide-level: 2
    incremental: false
  pdf:
    format: beamer 
    keep-tex: true
editor_options: 
  chunk_output_type: console
---

```{r}
#| label: setup
#| include: false
library(knitr)
knitr::opts_chunk$set(
  echo = FALSE,
  warning = FALSE,
  error = FALSE, 
  message = FALSE,
  fig.width = 10,
  fig.height = 6,
  fig.align = "center",
  out.width = "90%",
  dpi = 300,
  cache = FALSE
) 

options(kableExtra.html.bsTable = TRUE)
options(knitr.kable.NA = "")
options(knitr.duplicate.label = "allow")
```

```{r}
#| include: false
library(dplyr)
library(ggplot2)
library(glmmTMB)
library(texreg)
library(ggeffects)
library(patchwork)
library(gt)
library(kableExtra)
library(here)
library(modelsummary)
library(stargazer)
library(DiagrammeR)
library(performance)
library(broom.mixed)

# Cargar datos
load(here("input/data/proc/elsoc_final_2.RData"))

# Preparar datos
elsoc_final_2 <- elsoc_final_2 %>%
  mutate(
    educ_cat_unordered = factor(educ_cat_factor, ordered = FALSE),
    educ_cat_unordered = factor(
      educ_cat_unordered,
      labels = c(
        "Media completa o menos",
        "Téc. sup. incompleta",
        "Téc. sup. completa",
        "Univ. incompleta",
        "Univ. completa"
      )
    )
  )
```

:::::: columns
::: {.column width="20%"}
![](images/puc.gif)
:::

:::: {.column .column-right width="80%"}
# **Actitudes hacia la violencia política: Educación y Clase en el ciclo contencioso chileno (2016-2023)**

------------------------------------------------------------------------

**René Canales Sellés** <br> **Prof. Guía Nicolás Somma**

::: {.red2 .medium}
**Instituto de Sociología, Pontificia Universidad Católica de Chile**
:::

Fondecyt 1230922 "Actitudes y Comportamiento Político Juvenil: Desigualdad, estilos de socialización escolar e influencias intergeneracionales"

12 de noviembre, 2025
::::
::::::

# Contexto {data-background-color="#5f5758"}

::: {.incremental .highlight-last style="font-size: 85%;"}
- ¿Cómo la educación y clase social moldean actitudes hacia la violencia política?

- Contexto: Estallido social chileno (octubre 2019) - ciclo contencioso inédito con alta represión estatal y justificación diferenciada de violencia según perfil social.

- Problema teórico: Literatura clásica predice que más educación = menor violencia. Pero en Chile 2019, han surgido estudios que acusan lo contrario: sectores educados y participantes justificaron más la violencia de protesta (Cox et al., 2023).

- Argumento central: Los efectos de educación y clase son condicionales a la participación:

- Educación como amplificador: Sin participación → efecto civilizatorio. Con participación → provee marcos ideológicos para legitimar violencia de protesta.
- Reconfiguración moral: Universitarios movilizados distinguen entre violencia de protesta (legítima) vs. estatal (ilegítima).
- Clase social modera: Clase trabajadora = tolerancia basal alta, cambio bajo. Clase de servicio = tolerancia baja inicial, alto cambio al participar (convergencia por reencuadre moral).

- Contribución: La participación transforma actitudes de forma diferenciada según posición estructural - explica transversalidad del movimiento.
:::

## Pregunta

::: {.incremental .highlight-last style="font-size: 120%;"}
Pregunta de investigación: ¿Cómo interactúan la educación, la clase social y la participación en protestas para moldear actitudes hacia la violencia política en el contexto chileno?

Argumento central: Los efectos de educación y clase son condicionales a la participación:

- Educación como amplificador: Sin participación → efecto civilizatorio. Con participación → marcos ideológicos para legitimar violencia de protesta.

- Reconfiguración moral: Universitarios movilizados distinguen violencia de protesta (legítima) vs. estatal (ilegítima).

- Moderación de clase: Clase trabajadora = tolerancia alta/cambio bajo. Clase de servicio = tolerancia baja/cambio alto al participar.

:::

## Objetivos:

::: {.incremental .highlight-last style="font-size: 120%;"}

- Mostrar que el "efecto civilizatorio" de la educación es condicional al contexto participativo

- Evidenciar que participación interactúa con estratificación social de forma compleja

- Explicar bases sociales diferenciadas de legitimación durante el estallido
:::

# Antecedentes

## Educación y Actitudes Políticas (1/3)

**Tesis clásica: "efecto civilizatorio"**

- Educación → tolerancia, moderación, rechazo a violencia (Lipset, 1959)
- **Supuestos clave:**
  - Habilidades cognitivas para comprender complejidad social
  - Valores democráticos y pluralismo
  - Eficacia política subjetiva

**Limitación:** Modelo presupone igualdad estructural que raramente existe

## Educación y Actitudes Políticas (2/3)

**Educación en contextos desiguales:**

- No opera en terreno neutro → reproduce jerarquías (Bourdieu)
- En sistemas percibidos como injustos: educación permite **elaborar narrativas sofisticadas** de legitimación
- **Educación como amplificador cognitivo**, no barrera universal
- Permite articular violencia como "respuesta moral necesaria"

## Educación y Actitudes Políticas (3/3)

**Mecanismo de activación: participación en protestas**

1. **Contacto con represión estatal** → "autodefensa legítima"
2. **Exposición a narrativas justificatorias** → distinciones morales sofisticadas
3. **Reconfiguración identitaria** → compartimentalización cognitiva

**Resultado:** Mantener valores democráticos + justificar violencia situacional

## Hipótesis 1: Efecto Educativo Condicional

:::: {.columns}
::: {.column width="50%"}
**H1a: Sin participación**

Mayor educación → **menor** justificación

*(efecto civilizatorio clásico)*
:::

::: {.column width="50%"}
**H1b: Con participación**

Mayor educación → **mayor** justificación

*(marcos ideológicos sofisticados)*
:::
::::

La educación amplifica capacidad de legitimar violencia cuando se participa

## Participación como Transformación (1/2)

**Giro conceptual:**

- Modelo de recursos: participación refleja predisposiciones
- **Participación como socialización transformadora** (McAdam, 1989)

**Mecanismos de transformación:**

1. **Nuevos marcos cognitivos** (framing):
   - Diagnóstico, pronóstico, motivación
   - Resignificación: "orden público" → "violencia estructural estatal"

2. **Experiencia corporal/emocional**:
   - Represión erosiona legitimidad estatal
   - Valida narrativas del movimiento

## Participación como Transformación (2/2)

**Heterogeneidad del efecto:**

- Transformación no uniforme → depende de posición social y educación
- Educación + participación = capacidad de reelaboración moral sofisticada
- **Reconfiguración bidireccional** de marcos morales

## Hipótesis 2: Reconfiguración Bidireccional

**Universitarios participantes vs. no participantes:**

**H2a:** Mayor justificación de **violencia de manifestantes**

**H2b:** Menor justificación de **violencia estatal**

Mantienen valores democráticos pero reinterpretan tipos de violencia según legitimidad moral

## Desigualdad Estructural y Clase (1/3)

**Posición de clase moldea experiencias de conflicto:**

- **Clase trabajadora:**
  - Exposición cotidiana a violencia estructural
  - Normalización de la coerción
  - Mayor tolerancia basal

- **Clase de servicio/medias:**
  - Orden estable y predecible
  - Violencia como ruptura moral
  - Menor tolerancia basal

## Desigualdad Estructural y Clase (2/3)

**Habitus de clase (Bourdieu):**

- Traduce desigualdad estructural en **esquemas morales**
- Define qué acciones políticas son "razonables" o "legítimas"
- Orienta percepción de autoridad, justicia y conflicto

**La clase no solo condiciona recursos, sino marcos interpretativos**

## Desigualdad Estructural y Clase (3/3)

**Efecto techo:**

- **Clase trabajadora:**
  - Alta tolerancia basal (normalización pragmática)
  - Participación **refuerza** disposiciones existentes
  - Bajo potencial de cambio

- **Clase de servicio:**
  - Baja tolerancia inicial
  - Participación = **experiencia disruptiva**
  - Alto potencial de reconfiguración cognitiva

## Hipótesis 3: Moderación por Clase

**H3a:** Clase trabajadora → mayor justificación basal
*(independiente de participación)*

**H3b:** Incremento por participación es:

- **Menor** en clase trabajadora (efecto techo)

- **Mayor** en clase de servicio (potencial de cambio)

## Modelo Integrado

**Tres efectos condicionales:**

1. **Educación** opera diferencialmente según participación (H1)
2. **Participación** reconfigura marcos bidireccionally en universitarios (H2)
3. **Clase social** modera magnitud del cambio (H3)

**Resultado esperado:**

- Convergencia entre clases en **niveles** de justificación
- Divergencia en **marcos** que sustentan esa legitimación

# Datos y Metodología {data-background-color="#5f5758"}

::: incremental

## Datos: ELSOC

**Estudio Longitudinal Social de Chile (COES)**

- **Diseño:** Panel representativo nacional (población urbana adulta)
- **Período:** 2016-2023 (7 olas, sin 2020 por COVID)
- **Muestreo:** Probabilístico, estratificado, por conglomerados, multietápico
- **Cobertura:** 1.067 manzanas censales, población 18-75 años

**Muestra analítica:**
- 20.007 observaciones anidadas en 3.666 individuos
- Criterio: ≥3 olas participadas
- Retención: ~60% (atrición ~40%)

## Variables Dependientes

**Dos índices aditivos (escala 1-5):**

**1. Justificación de Violencia en Protestas** (α = 0.82)
- Bloquear calles en huelga
- Tomas de colegios/universidades
- Tomas violentas de edificios
- Paralizar transporte con violencia
- Destruir locales en marchas

**2. Justificación de Violencia Estatal** (r = 0.58)
- Carabineros reprimen manifestación pacífica
- Carabineros desalojan tomas por la fuerza

**Correlación entre índices:** r = -0.23*** (violencias conceptualmente distintas)

## Variables Independientes Principales

**Educación** (5 categorías, no ordenada):
1. Media completa o menos (ref.)
2. Técnica superior incompleta
3. Técnica superior completa
4. Universitaria incompleta
5. Universitaria completa

**Clase Social** (esquema EGP simplificado):
1. Service class (ref.): profesionales, gerentes
2. Intermediate class: empleados rutina, pequeña propiedad
3. Working class: trabajadores manuales

**Participación en Protestas:** Dicotómica (últimos 12 meses)

## Variables de Control

- **Edad:** Continua (centrada en media)
- **Género:** Dicotómica (1=Mujer)
- **Ideología política:** Auto-posicionamiento 0-10 (estandarizada)
- **Año:** Efectos fijos por ola (controla tendencias temporales)

## Estrategia Analítica: Modelos Multinivel

**Problema:** Datos panel → observaciones correlacionadas dentro de individuos

**Solución:** Modelos Lineales Generalizados Mixtos (GLMM)

**Estructura jerárquica:**
- Nivel 1: Observaciones en el tiempo (t)
- Nivel 2: Individuos (j)

**Ventaja:** Controla dependencia temporal + heterogeneidad individual

## Especificación del Modelo

**Nivel 1 (intra-individual):**
$$y_{tj} = \beta_{0j} + \beta_1 X_{tj} + \varepsilon_{tj}$$

**Nivel 2 (inter-individual):**
$$\beta_{0j} = \gamma_{00} + \gamma_{01} Z_j + u_{0j}$$

**Modelo integrado:**
$$y_{tj} = \gamma_{00} + \gamma_{01} Z_j + \beta_1 X_{tj} + u_{0j} + \varepsilon_{tj}$$

- $u_{0j}$: Intercepto aleatorio (efectos individuales)
- $\varepsilon_{tj}$: Error residual
- Descompone varianza: entre individuos ($\sigma^2_u$) y dentro ($\sigma^2_\varepsilon$)

## Modelos con Interacción

**Educación × Participación (H1):**
$$y_{tj} = \gamma_{00} + \gamma_{01} \text{Educ}_j + \gamma_{02} \text{Part}_{tj} + \gamma_{03} (\text{Educ}_j \times \text{Part}_{tj}) + \text{Controles} + u_{0j} + \varepsilon_{tj}$$

**Clase × Participación (H3):**
$$y_{tj} = \gamma_{00} + \gamma_{01} \text{Clase}_j + \gamma_{02} \text{Part}_{tj} + \gamma_{03} (\text{Clase}_j \times \text{Part}_{tj}) + \text{Controles} + u_{0j} + \varepsilon_{tj}$$

**Interpretación:** Coeficiente de interacción = cambio en efecto de participación según categoría educativa/clase

## Elección de Distribución

**Variable dependiente:** Índice continuo (1-5)

**Justificación para tratamiento como continua:**
1. Promedio de múltiples ítems → distribución más continua
2. Escalas Likert ≥5 puntos tratables como continuas (Norman, 2010)
3. Permite interpretar cambios promedio en escala

**Especificación:**
- Distribución: Gaussiana (normal)
- Enlace: Identidad
- Estimación: Máxima verosimilitud restringida (REML)

## Análisis de Robustez

**Modelos alternativos (Anexos):**

Variable dependiente **dicotomizada:**
- 1 = Justifica en algún grado (índice > 1)
- 0 = Nunca justifica (índice = 1)

**Especificación:**
- Distribución: Binomial
- Enlace: Logit
- Misma estructura multinivel

**Objetivo:** Verificar que resultados no dependen de operacionalización

## Software y Replicabilidad

**R (versión 4.3.1):**
- `glmmTMB`: Estimación modelos mixtos
- `ggeffects`: Efectos marginales y predicciones
- `ggplot2`: Visualización

**Transparencia:**
- Scripts completos disponibles en GitHub
- Replicabilidad computacional total
- Código: limpieza, variables, modelos, figuras

## Datos y Estructura

**ELSOC 2016-2023:**
- 20.007 observaciones anidadas en 3.666 individuos
- Criterio: ≥3 olas participadas
```{r}
#| echo: false
#| include: false

# Modelos nulos
mod_baseline_1 <- glmmTMB(
  justif_violencia_protesta ~ (1 | idencuesta),
  data = elsoc_final_2,
  family = gaussian()
)

mod_baseline_2 <- glmmTMB(
  justif_violencia_estatal ~ (1 | idencuesta),
  data = elsoc_final_2,
  family = gaussian()
)

# Calcular ICC (no se imprimirá)
icc_protesta <- icc(mod_baseline_1)  # 0.229
icc_estatal <- icc(mod_baseline_2)  # 0.240
```

**ICC:** Violencia protestas = 22.9%, Violencia estatal = 24.0%
→ Confirma idoneidad del enfoque multinivel

## Descriptivos: Educación × Participación
```{r}
#| label: tbl-justificacion-educ
#| tbl-cap: "Justificación de violencia según nivel educativo y participación"
#| echo: false
#| warning: false

elsoc_final_2 <- elsoc_final_2 %>%
  mutate(
    educ_cat_unordered = factor(
      educ_cat_unordered,
      labels = c(
        "Media completa o menos",
        "Téc. sup.incompleta",
        "Téc. sup.completa",
        "Univ. incompleta",
        "Univ. completa"
      )
    )
  )

elsoc_final_2 %>%
  filter(!is.na(educ_cat_unordered) & !is.na(protesta_dummy)) %>%
  group_by(educ_cat_unordered, Participacion = factor(protesta_dummy, 
                                                       labels = c("No participó", "Participó"))) %>%
  summarise(
    N = n(),
    `Viol. Protestas` = round(mean(justif_violencia_protesta, na.rm = TRUE), 2),
    `Viol. Estatal` = round(mean(justif_violencia_estatal, na.rm = TRUE), 2),
    .groups = "drop"
  ) %>%
  knitr::kable(booktabs = TRUE)
```

---

## Patrón Clave en Descriptivos

**Sin participación:**
- Media o menos: 1.90
- Universitaria completa: 1.80 (↓ efecto civilizatorio)

**Con participación:**
- Media o menos: 1.95
- Universitaria completa: **2.20** (↑ **se invierte**)

→ Educación opera diferencialmente según contexto de acción

---

## Descriptivos: Clase × Participación
```{r}
#| label: tbl-justificacion-clase
#| tbl-cap: "Justificación según clase social y participación"
#| echo: false
#| warning: false

elsoc_final_2 %>%
  filter(!is.na(egp3) & !is.na(protesta_dummy)) %>%
  group_by(egp3, Participacion = factor(protesta_dummy, 
                                         labels = c("No participó", "Participó"))) %>%
  summarise(
    N = n(),
    `Viol. Protestas` = round(mean(justif_violencia_protesta, na.rm = TRUE), 2),
    `Viol. Estatal` = round(mean(justif_violencia_estatal, na.rm = TRUE), 2),
    .groups = "drop"
  ) %>%
  knitr::kable(booktabs = TRUE)
```

**Convergencia:** Service class +0.45, Working class +0.20
→ Diferencias se reducen entre participantes

## Distribución de Participación
```{r}
#| label: fig-participacion-distribucion
#| fig-cap: "Distribución de participación por educación y clase"
#| fig-height: 5
#| fig-width: 10
#| echo: false

# Panel A: Por educación
plot_part_educ <- elsoc_final_2 %>%
  filter(!is.na(educ_cat_unordered) & !is.na(protesta_dummy)) %>%
  group_by(educ_cat_unordered) %>%
  summarise(
    Total = n(),
    Participaron = sum(protesta_dummy),
    Porcentaje = 100 * Participaron / Total,
    .groups = "drop"
  ) %>%
  ggplot(aes(x = educ_cat_unordered, y = Porcentaje)) +
  geom_col(fill = "#0073C2FF", width = 0.7) +
  geom_text(aes(label = paste0(round(Porcentaje, 1), "%")), 
            vjust = -0.5, size = 3.5) +
  labs(title = "Participación por Nivel Educativo",
       x = "Nivel Educativo", y = "% que Participó") +
  theme_minimal(base_size = 11) +
  theme(axis.text.x = element_text(angle = 45, hjust = 1)) +
  ylim(0, 35)

# Panel B: Por clase
plot_part_clase <- elsoc_final_2 %>%
  filter(!is.na(egp3) & !is.na(protesta_dummy)) %>%
  group_by(egp3) %>%
  summarise(
    Total = n(),
    Participaron = sum(protesta_dummy),
    Porcentaje = 100 * Participaron / Total,
    .groups = "drop"
  ) %>%
  ggplot(aes(x = egp3, y = Porcentaje)) +
  geom_col(fill = "#00BA38", width = 0.6) +
  geom_text(aes(label = paste0(round(Porcentaje, 1), "%")), 
            vjust = -0.5, size = 3.5) +
  labs(title = "Participación por Clase Social",
       x = "Clase Social", y = "% que Participó") +
  theme_minimal(base_size = 11) +
  theme(axis.text.x = element_text(angle = 45, hjust = 1)) +
  ylim(0, 35)

plot_part_educ + plot_part_clase
```

## Evolución Temporal (2016-2023)
```{r}
#| label: fig-evolucion-temporal
#| fig-cap: "Evolución de justificación y participación 2016-2023"
#| fig-height: 5
#| fig-width: 10
#| echo: false

# Panel A: Violencia
plot_evol_violencia <- elsoc_final_2 %>%
  group_by(year) %>%
  summarise(
    `Viol. en Protestas` = mean(justif_violencia_protesta, na.rm = TRUE),
    `Viol. Estatal` = mean(justif_violencia_estatal, na.rm = TRUE),
    .groups = "drop"
  ) %>%
  tidyr::pivot_longer(cols = starts_with("Viol"), 
                      names_to = "Tipo", 
                      values_to = "Justificacion") %>%
  ggplot(aes(x = year, y = Justificacion, color = Tipo, group = Tipo)) +
  geom_line(linewidth = 1.2) +
  geom_point(size = 3) +
  scale_color_manual(values = c("Viol. en Protestas" = "#EFC000FF", 
                                  "Viol. Estatal" = "#0073C2FF")) +
  labs(title = "Evolución de Justificación", x = "Año",
       y = "Justificación (1-5)", color = "Tipo") +
  theme_minimal(base_size = 11) +
  theme(legend.position = "bottom")

# Panel B: Participación
plot_evol_particip <- elsoc_final_2 %>%
  group_by(year) %>%
  summarise(
    Participacion = 100 * mean(protesta_dummy, na.rm = TRUE),
    .groups = "drop"
  ) %>%
  ggplot(aes(x = year, y = Participacion)) +
  geom_line(linewidth = 1.2, color = "#619CFF") +
  geom_point(size = 3, color = "#619CFF") +
  labs(title = "Evolución de Participación", x = "Año",
       y = "% que Participó") +
  theme_minimal(base_size = 11)

plot_evol_violencia + plot_evol_particip
```

**Hallazgo paradójico:** 2019 = nivel MÁS BAJO de justificación

## Correlaciones Clave
```{r}
#| label: tbl-correlaciones
#| tbl-cap: "Correlaciones entre justificación y variables clave"
#| echo: false

cor_data <- elsoc_final_2 %>%
  filter(!is.na(justif_violencia_protesta) & !is.na(justif_violencia_estatal)) %>%
  mutate(
    educ_num = as.numeric(educ_cat_unordered),
    edad_std = scale(edad)[,1],
    mujer_num = as.numeric(mujer)
  ) %>%
  dplyr::select(justif_violencia_protesta, justif_violencia_estatal, 
         educ_num, edad_std, mujer_num, ideologia_std, protesta_dummy) %>%
  na.omit()

cor_matrix <- cor(cor_data)

cor_table <- data.frame(
  Variable = c("Educación", "Edad", "Mujer", "Ideología", "Participación"),
  Viol_Protestas = round(cor_matrix[1, 3:7], 3),
  Viol_Estatal = round(cor_matrix[2, 3:7], 3)
)

cor_table %>%
  knitr::kable(
    col.names = c("Variable", "Viol. Protestas", "Viol. Estatal"),
    booktabs = TRUE
  )
```

→ Participación: r ≈ 0.20-0.25 con protestas, débil con estatal
→ Ideología: direcciones opuestas según tipo

## H1: Efecto Paradójico de la Educación
```{r}
#| echo: false
#| include: false

mod_educ_protesta <- glmmTMB(
  justif_violencia_protesta ~ educ_cat_unordered * protesta_dummy +
    edad + mujer + ideologia_std + factor(year) +
    (1 | idencuesta),
  data = elsoc_final_2,
  family = gaussian()
)
```
```{r}
#| label: fig-modelo-educ-protesta
#| fig-cap: "Coeficientes Modelo Educación × Participación"
#| fig-height: 6
#| fig-width: 8
#| echo: false

# Extraer coeficientes
coef_educ <- broom.mixed::tidy(mod_educ_protesta, conf.int = TRUE) %>%
  filter(effect == "fixed", 
         !grepl("year", term),
         term != "(Intercept)") %>%
  mutate(
    term = case_when(
      term == "educ_cat_unorderedTéc. sup.incompleta" ~ "Téc. sup. incompleta",
      term == "educ_cat_unorderedTéc. sup.completa" ~ "Téc. sup. completa",
      term == "educ_cat_unorderedUniv. incompleta" ~ "Univ. incompleta",
      term == "educ_cat_unorderedUniv. completa" ~ "Univ. completa",
      term == "protesta_dummy" ~ "Participación",
      term == "edad" ~ "Edad",
      term == "mujer" ~ "Mujer",
      term == "ideologia_std" ~ "Ideología",
      grepl(":", term) ~ gsub("educ_cat_unordered", "", term),
      TRUE ~ term
    ),
    term = gsub(":protesta_dummy", " × Particip.", term),
    significativo = ifelse(p.value < 0.05, "Sí", "No")
  )

ggplot(coef_educ, aes(x = estimate, y = reorder(term, estimate), color = significativo)) +
  geom_vline(xintercept = 0, linetype = "dashed", color = "gray50") +
  geom_point(size = 3) +
  geom_errorbarh(aes(xmin = conf.low, xmax = conf.high), height = 0.2, linewidth = 1) +
  scale_color_manual(values = c("No" = "gray60", "Sí" = "#EFC000FF")) +
  labs(
    title = "Efectos sobre Justificación de Violencia en Protestas",
    x = "Coeficiente (IC 95%)", y = "",
    color = "p < 0.05"
  ) +
  theme_minimal(base_size = 12) +
  theme(legend.position = "bottom")
```

---

## H1: Interpretación del Modelo

**Efectos principales (no participantes):**
- Universitaria completa: **-0.11** (efecto civilizatorio)

**Interacciones (participantes):**
- Univ. completa × Protesta: **+0.36***
- Efecto total: -0.11 + 0.36 = **+0.25**

**Conclusión H1:** Educación amplifica capacidad de legitimar violencia cuando se participa

## H1: Visualización
```{r}
#| label: fig-paradoja-educacion
#| fig-cap: "Efecto paradójico de educación según participación"
#| fig-height: 5
#| fig-width: 8
#| echo: false

pred_educ <- ggpredict(mod_educ_protesta, 
                       terms = c("educ_cat_unordered", "protesta_dummy"))

plot(pred_educ) +
  labs(
    title = "Efecto de Educación sobre Justificación de Violencia en Protestas",
    subtitle = "Según participación en protestas",
    x = "Nivel Educativo",
    y = "Justificación de Violencia (predicha)",
    color = "Participación"
  ) +
  theme_minimal(base_size = 13) +
  theme(axis.text.x = element_text(angle = 45, hjust = 1))
```

## H2: Reconfiguración Bidireccional (1/2)
```{r}
#| echo: false
#| include: false

mod_educ_estatal <- glmmTMB(
  justif_violencia_estatal ~ educ_cat_unordered * protesta_dummy +
    edad + mujer + ideologia_std + factor(year) +
    (1 | idencuesta),
  data = elsoc_final_2,
  family = gaussian()
)
```
```{r}
#| label: fig-modelos-comparativos
#| fig-cap: "Comparación Modelos: Protestas vs. Estatal"
#| fig-height: 6
#| fig-width: 10
#| echo: false

# Extraer coeficientes de ambos modelos
coef_protesta <- broom.mixed::tidy(mod_educ_protesta, conf.int = TRUE) %>%
  filter(effect == "fixed", 
         !grepl("year", term),
         term != "(Intercept)") %>%
  mutate(Modelo = "Violencia en Protestas")

coef_estatal <- broom.mixed::tidy(mod_educ_estatal, conf.int = TRUE) %>%
  filter(effect == "fixed", 
         !grepl("year", term),
         term != "(Intercept)") %>%
  mutate(Modelo = "Violencia Estatal")

# Combinar
coef_comparativo <- bind_rows(coef_protesta, coef_estatal) %>%
  mutate(
    term = case_when(
      term == "educ_cat_unorderedTéc. sup.incompleta" ~ "Téc. sup. incompleta",
      term == "educ_cat_unorderedTéc. sup.completa" ~ "Téc. sup. completa",
      term == "educ_cat_unorderedUniv. incompleta" ~ "Univ. incompleta",
      term == "educ_cat_unorderedUniv. completa" ~ "Univ. completa",
      term == "protesta_dummy" ~ "Participación",
      term == "edad" ~ "Edad",
      term == "mujer" ~ "Mujer",
      term == "ideologia_std" ~ "Ideología",
      grepl(":", term) ~ gsub("educ_cat_unordered", "", term),
      TRUE ~ term
    ),
    term = gsub(":protesta_dummy", " × Particip.", term),
    significativo = ifelse(p.value < 0.05, "Sí", "No")
  )

ggplot(coef_comparativo, aes(x = estimate, y = reorder(term, estimate), 
                              color = Modelo, shape = significativo)) +
  geom_vline(xintercept = 0, linetype = "dashed", color = "gray50") +
  geom_point(size = 3, position = position_dodge(width = 0.5)) +
  geom_errorbarh(aes(xmin = conf.low, xmax = conf.high), 
                 height = 0.3, linewidth = 0.8,
                 position = position_dodge(width = 0.5)) +
  scale_color_manual(values = c("Violencia en Protestas" = "#EFC000FF", 
                                 "Violencia Estatal" = "#0073C2FF")) +
  scale_shape_manual(values = c("No" = 1, "Sí" = 16)) +
  labs(
    title = "Comparación de Efectos: Violencia en Protestas vs. Violencia Estatal",
    x = "Coeficiente (IC 95%)", y = "",
    color = "Tipo de Violencia", shape = "p < 0.05"
  ) +
  theme_minimal(base_size = 11) +
  theme(legend.position = "bottom")
```

## H2: Universitarios que Participan

**Interacciones clave:**

| Tipo de violencia | Efecto no participa | Interacción | Efecto participa |
|-------------------|---------------------|-------------|------------------|
| **Violencia protestas** | -0.11 | **+0.36*** | **+0.25** |
| **Violencia estatal** | +0.06 | **-0.18** | **-0.12** |

**Conclusión H2:** Reconfiguración **bidireccional coherente**:
- ↑ Legitima violencia como protesta

- ↓ Deslegitima violencia como represión

## H2: Visualización Bidireccional
```{r}
#| label: fig-bidireccional
#| fig-cap: "Reconfiguración bidireccional en universitarios"
#| fig-height: 5
#| fig-width: 8
#| echo: false

efectos_bidireccional <- data.frame(
  Tipo = c("Violencia en\nProtestas", "Violencia\nEstatal"),
  Efecto_NoParticipa = c(-0.11, 0.06),
  Efecto_Participa = c(0.25, -0.16)
)

efectos_long <- tidyr::pivot_longer(efectos_bidireccional, 
                                     cols = starts_with("Efecto"),
                                     names_to = "Grupo",
                                     values_to = "Efecto")
efectos_long$Grupo <- ifelse(efectos_long$Grupo == "Efecto_NoParticipa",
                               "No participó", "Participó")

ggplot(efectos_long, aes(x = Tipo, y = Efecto, fill = Grupo)) +
  geom_col(position = position_dodge(width = 0.8), width = 0.7) +
  geom_hline(yintercept = 0, linetype = "dashed", color = "red") +
  scale_fill_manual(values = c("No participó" = "#0073C2FF", 
                                "Participó" = "#EFC000FF")) +
  labs(
    title = "Efecto de Educación Universitaria según Tipo de Violencia",
    subtitle = "Universitarios participantes legitiman violencia táctica pero critican violencia estatal",
    x = "", y = "Efecto en Justificación", fill = "Participación"
  ) +
  theme_minimal(base_size = 13) +
  theme(legend.position = "bottom")
```

## H3: Clase como Moderador (1/2)
```{r}
#| echo: false
#| include: false

mod_clase_protesta <- glmmTMB(
  justif_violencia_protesta ~ egp3 * protesta_dummy +
    edad + mujer + ideologia_std + factor(year) +
    (1 | idencuesta),
  data = elsoc_final_2,
  family = gaussian()
)
```
```{r}
#| label: fig-modelo-clase-protesta
#| fig-cap: "Coeficientes Modelo Clase × Participación"
#| fig-height: 6
#| fig-width: 8
#| echo: false

# Extraer coeficientes
coef_clase <- broom.mixed::tidy(mod_clase_protesta, conf.int = TRUE) %>%
  filter(effect == "fixed", 
         !grepl("year", term),
         term != "(Intercept)") %>%
  mutate(
    term = case_when(
      term == "egp3Intermediate class" ~ "Intermediate class",
      term == "egp3Working class" ~ "Working class",
      term == "protesta_dummy" ~ "Participación",
      term == "edad" ~ "Edad",
      term == "mujer" ~ "Mujer",
      term == "ideologia_std" ~ "Ideología",
      term == "egp3Intermediate class:protesta_dummy" ~ "Intermediate × Particip.",
      term == "egp3Working class:protesta_dummy" ~ "Working × Particip.",
      TRUE ~ term
    ),
    significativo = ifelse(p.value < 0.05, "Sí", "No")
  )

ggplot(coef_clase, aes(x = estimate, y = reorder(term, estimate), color = significativo)) +
  geom_vline(xintercept = 0, linetype = "dashed", color = "gray50") +
  geom_point(size = 3) +
  geom_errorbarh(aes(xmin = conf.low, xmax = conf.high), height = 0.2, linewidth = 1) +
  scale_color_manual(values = c("No" = "gray60", "Sí" = "#00BA38")) +
  labs(
    title = "Efectos de Clase Social sobre Justificación de Violencia en Protestas",
    x = "Coeficiente (IC 95%)", y = "",
    color = "p < 0.05"
  ) +
  theme_minimal(base_size = 12) +
  theme(legend.position = "bottom")
```

## H3: Interpretación del Modelo

**Efectos principales (no participantes):**
- Working class: **+0.09** vs. Service class (mayor predisposición)

**Efectos de participación:**
- Service class: **+0.36*** (efecto fuerte)
- Working class: +0.36 - 0.15 = **+0.21** (efecto atenuado)
- Interacción Working × Protesta: **-0.15**

**Conclusión H3:** Service class mayor transformación, Working class efecto techo

## H3: Visualización
```{r}
#| label: fig-clase-protesta
#| fig-cap: "Efecto de participar según clase social"
#| fig-height: 5
#| fig-width: 8
#| echo: false

pred_clase <- ggpredict(mod_clase_protesta, 
                        terms = c("protesta_dummy", "egp3"))

plot(pred_clase) +
  labs(
    title = "Justificación según Clase Social y Participación",
    subtitle = "Service class: mayor cambio. Working class: efecto techo",
    x = "Participación en Protestas",
    y = "Justificación de Violencia (predicha)",
    color = "Clase Social"
  ) +
  theme_minimal(base_size = 13) +
  theme(legend.position = "bottom")
```

## Síntesis de Hallazgos

**H1 confirmada:** Educación tiene efecto **condicional**
- Sin participación: efecto civilizatorio (-0.11)

- Con participación: amplificador cognitivo (+0.25)

**H2 confirmada:** Reconfiguración **bidireccional**
- ↑ Justificación violencia de protestas

- ↓ Justificación violencia estatal

**H3 confirmada:** Clase social **modera** cambio
- Service class: +0.36 (mayor potencial)

- Working class: +0.21 (efecto techo)

## Implicancias Sustantivas

**Transversalidad del estallido explicada por:**

1. **Transformación de sectores educados:** Desarrollaron marcos morales legitimadores mediante participación

2. **Convergencia por clase:** Diferencias estructurales se reducen en contexto de movilización

3. **Selectividad moral:** Distinción sofisticada entre tipos de violencia

**Conclusión:** La movilización **transformó** actitudes de forma diferenciada según posición estructural