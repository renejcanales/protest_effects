<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.23">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>introduction</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="01-introduction_files/libs/clipboard/clipboard.min.js"></script>
<script src="01-introduction_files/libs/quarto-html/quarto.js" type="module"></script>
<script src="01-introduction_files/libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="01-introduction_files/libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="01-introduction_files/libs/quarto-html/popper.min.js"></script>
<script src="01-introduction_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="01-introduction_files/libs/quarto-html/anchor.min.js"></script>
<link href="01-introduction_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="01-introduction_files/libs/quarto-html/quarto-syntax-highlighting-1fe81d0376b2c50856e68e651e390326.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="01-introduction_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="01-introduction_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="01-introduction_files/libs/bootstrap/bootstrap-9e3ffae467580fdb927a41352e75a2e0.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">


</head>

<body class="fullcontent quarto-light">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">




<section id="introducción" class="level1">
<h1>Introducción</h1>
<p>El 18 de octubre de 2019 marcó un antes y un después en la historia política de Chile. Lo que comenzó como una evasión masiva del metro en Santiago se transformó en pocas horas en el acontecimiento contencioso más importante desde el retorno a la democracia en 1990 (Somma et al., 2021). Durante semanas, miles de personas ocuparon las calles de todo el país, desafiando no solo la herencia del neoliberalismo que arrastraba el país desde la dictadura, sino también los límites históricos de lo que se consideraba acción colectiva. Las protestas del llamado “estallido social” combinaron masividad, aparente transversalidad social y repertorios confrontacionales de manera inédita: desde marchas pacíficas hasta bloqueos de calles, ocupaciones de plazas públicas, y episodios recurrentes de violencia contra la propiedad y enfrentamientos con fuerzas de ley y orden. La respuesta estatal fue igualmente sin precedentes: más de 8,000 víctimas de violencia policial, más de 400 casos de trauma ocular, y lo que Amnistía Internacional calificó como la crisis de derechos humanos más grave desde el fin de la dictadura (Amnistía Internacional, 2020; Human Rights Watch, 2019). En medio de la polarización mediática y política, una pregunta emergió con urgencia tanto en espacios públicos como académicos: ¿cuándo, si acaso, es legítima la violencia política? Y más importante aún: ¿quiénes justifican qué tipo de violencia?</p>
<p>Observadores del estallido notaron un patrón contraintuitivo que desafiaba las expectativas del sentido sociológico común: entre quienes defendían ciertas formas de violencia táctica en protestas, profesionales, académicos y estudiantes universitarios estaban notoriamente representados. Análisis preliminares de encuestas mostraban que manifestantes intensivos tendían a ser “jóvenes y educados, más de izquierda, más interesados y participativos en política”, y “más probables de justificar acciones ilegales/violentas como medio para el cambio social” (González &amp; Le Foulon, 2020, p.&nbsp;228). Este patrón empírico contradice décadas de investigación en ciencias sociales que han documentado consistentemente una asociación entre mayor educación y actitudes menos permisivas hacia la violencia, la transgresión normativa y el autoritarismo (Nie et al., 1996; Weakliem, 2002). Si la educación supuestamente promueve valores democráticos de tolerancia y resolución pacífica de conflictos, ¿cómo explicar que universitarios participantes en protestas mostraran niveles comparativamente altos de justificación de violencia política?</p>
<p>La literatura existente sobre educación y actitudes políticas ha documentado de manera robusta lo que podríamos llamar un “efecto civilizatorio” de la educación formal. Desde los trabajos seminales de Lipset en los años 60 hasta investigaciones recientes, numerosos estudios muestran que personas con mayor educación tienden a exhibir actitudes más tolerantes, mayor apoyo a normas democráticas, menor autoritarismo y rechazo a la violencia como medio político. Nie et al.&nbsp;(1996) argumentan que la educación afecta la ciudadanía democrática a través de dos vías: incrementando la sofisticación racional y posicionando a individuos en redes que facilitan el compromiso político. Weakliem (2002) muestra que estos efectos operan transculturalmente, reflejando la influencia de lo que denomina “cultura ilustrada oficial”. Los mecanismos propuestos son múltiples: la educación incrementaría la sofisticación cognitiva, expondría a las personas a perspectivas diversas, desarrollaría habilidades de pensamiento crítico y facilitaría la internalización de normas democráticas. De manera similar, aunque con resultados más mixtos, la literatura sobre clase social y actitudes políticas ha explorado cómo la posición en la estructura ocupacional se asocia con orientaciones diferenciadas hacia la autoridad, el orden social y la transgresión normativa (Svallfors, 2006).</p>
<p>Sin embargo, esta literatura comparte una limitación fundamental: asume que los efectos de educación y clase social sobre actitudes hacia la violencia política son lineales, estables y operan de manera independiente del contexto situacional y las experiencias concretas de los individuos. Los estudios típicamente modelan educación y clase como predictores directos de actitudes, sin considerar que sus efectos pueden ser contingentes a otras variables cruciales, particularmente la experiencia de participación en protestas. Esta omisión es problemática porque ignora que la participación política no es meramente un reflejo de predisposiciones previas, sino una experiencia potencialmente transformadora que puede reconfigurar marcos cognitivos, identidades colectivas y evaluaciones morales sobre lo que constituye acción política legítima. McAdam (1989), en un estudio pionero sobre el tema, demostró que la participación en activismo de alto riesgo tiene “consecuencias biográficas” profundas y duraderas: los voluntarios no solo permanecieron más activos políticamente décadas después, sino que sus trayectorias profesionales, maritales y valores fundamentales fueron transformados por la experiencia. Si asumimos que participar en protestas expone a las personas a marcos discursivos alternativos (Snow &amp; Benford, 1988), genera solidaridad grupal, y puede involucrar experiencias directas de represión estatal, entonces es plausible que los efectos de educación y clase operen de manera diferente entre quienes participan versus quienes no lo hacen.</p>
<p>Una segunda limitación conceptual de la literatura tradicional sobre desigualdad y conflicto radica en su enfoque exclusivo sobre desigualdades “verticales” (inter-individuales) en vez de desigualdades “horizontales” (inter-grupales). Como documenta Østby (2013), décadas de estudios sobre desigualdad vertical medida por el coeficiente de Gini han producido resultados inconsistentes respecto a su relación con violencia política. El problema, argumenta siguiendo a Stewart (2002, 2008), es que el conflicto y la violencia son fenómenos esencialmente grupales, no situaciones de individuos cometiendo violencia aleatoriamente. La identidad grupal es crítica para el reclutamiento y mantención de lealtad a organizaciones de movilización.</p>
<p>En el caso chileno, las divisiones relevantes no son puramente económicas individuales, sino que se estructuran a través de clivajes educativos y de clase que configuran experiencias colectivas diferenciadas. La clase trabajadora (working class) experimenta cotidianamente formas de violencia estructural y simbólica que pueden generar mayor tolerancia basal hacia transgresiones normativas, mientras que la clase de servicio (service class), más distante de estas experiencias, puede experimentar transformaciones cognitivas más profundas al participar en protestas (Horowitz, 1985).</p>
<p>Este artículo propone que los efectos de la educación y la clase social sobre actitudes hacia la violencia política son fundamentalmente contingentes a la participación en protestas, y que operan a través de mecanismos sociológicos diferenciados. Específicamente, argumento tres puntos centrales. Primero, la educación no tiene un efecto civilizatorio universal, sino que actúa como un amplificador condicional: entre quienes no participan en protestas, mayor educación efectivamente reduce la justificación de violencia (consistente con el efecto civilizatorio clásico); sin embargo, entre quienes sí participan, este efecto se invierte, y personas más educadas muestran mayor justificación de violencia en manifestaciones. Este “efecto paradójico” sugiere que la educación facilita la elaboración de marcos ideológicos complejos que pueden legitimar la violencia táctica en contextos específicos de movilización, similar a como Snow y Benford (1988) argumentan que los movimientos sociales construyen “marcos de acción colectiva” que redefinen lo que cuenta como acción legítima.</p>
<p>Segundo, la participación en protestas genera una reconfiguración bidireccional de actitudes hacia violencia según el tipo de actor que la ejerce. Universitarios que participan en protestas no solo incrementan su justificación de violencia ejercida por manifestantes, sino que simultáneamente reducen su justificación de violencia ejercida por Carabineros. Esta diferenciación sugiere que la participación facilita el desarrollo de marcos morales coherentes que legitiman la violencia como herramienta de resistencia mientras deslegitiman la violencia como herramienta de represión estatal, un patrón consistente con literatura sobre legitimidad policial que muestra que la percepción de injusticia procedimental erosiona la legitimidad institucional (Tyler, 2006).</p>
<p>Tercero, la clase social opera como un moderador estructural que determina la intensidad del cambio actitudinal al participar. Siguiendo el enfoque de desigualdades horizontales (Stewart, 2002, 2008; Østby, 2013), argumento que la clase trabajadora (working class), debido a su mayor proximidad a experiencias cotidianas de violencia estructural y simbólica, parte de niveles más altos de tolerancia hacia la violencia política, mostrando un “efecto techo” al participar (menor transformación). En contraste, la clase de servicio (service class), más distante de estas experiencias, experimenta una transformación cognitiva más profunda al involucrarse en protestas. Como señala Østby (2013, p.&nbsp;216), las desigualdades horizontales afectan la movilización grupal tanto a través de mecanismos basados en agravios (grievances) como en oportunidades. En el caso de la clase trabajadora, los agravios preexistentes generan una predisposición estructural que limita el cambio marginal al participar. Este patrón implica que la participación tiene efectos niveladores entre clases (convergencia), mientras que amplifica desigualdades educativas (divergencia).</p>
<p>La pregunta que guía este estudio es: ¿Cómo interactúan la educación, la clase social y la participación en protestas para moldear actitudes hacia la violencia política en el contexto chileno?</p>
<p>Los objetivos específicos son:</p>
<ul>
<li><p>Examinar el efecto diferencial de la educación sobre la justificación de violencia política según participación en protestas, testeando si el “efecto civilizatorio” se mantiene, se atenúa o se invierte entre participantes.</p></li>
<li><p>Analizar la reconfiguración bidireccional de actitudes hacia violencia ejercida por diferentes actores (manifestantes versus Carabineros) entre universitarios que participan en protestas.</p></li>
<li><p>Evaluar el rol moderador de la clase social en la relación entre participación y actitudes hacia violencia, identificando si existen efectos diferenciales entre service class, intermediate class y working class.</p></li>
<li><p>Comparar los mecanismos sociológicos diferenciados a través de los cuales educación y clase social operan como determinantes de actitudes hacia violencia política.</p></li>
</ul>
<p>El análisis de datos longitudinales de la Encuesta Longitudinal Social de Chile (ELSOC) 2016-2023, que cubre el periodo antes, durante y después del estallido social, revela cuatro hallazgos principales. Primero, se documenta un efecto paradójico de la educación: entre no participantes, universitarios justifican menos la violencia en protestas (-0.11 puntos en escala 1-5, p&lt;0.001); sin embargo, entre participantes, universitarios muestran los niveles más altos de justificación (+0.25 puntos respecto al efecto base). Segundo, universitarios que participan exhiben una reconfiguración bidireccional coherente: incrementan 0.25 puntos su justificación de violencia en protestas, pero reducen 0.16 puntos su justificación de violencia policial (p&lt;0.001 en ambos casos). Tercero, la clase social modera la intensidad del cambio: la service class experimenta un incremento de 0.36 puntos al participar, mientras que la working class solo incrementa 0.19 puntos (interacción negativa: -0.17, p&lt;0.10). Cuarto, estos patrones revelan mecanismos diferenciados: la educación amplifica efectos de participación (interacciones positivas, divergencia entre grupos educativos), mientras que la clase los modera estructuralmente (interacciones negativas, convergencia entre clases).</p>
<p>Este estudio contribuye a tres literaturas. Primero, a la investigación sobre educación y actitudes políticas (Nie et al., 1996; Weakliem, 2002), al demostrar que el efecto civilizatorio de la educación es condicional y no universal, dependiendo críticamente del contexto de activación (participación versus no participación). La educación no es inherentemente civilizatoria, sino que actúa como amplificador cognitivo que puede legitimar o deslegitimar violencia según marcos situacionales. Segundo, contribuye a la literatura sobre participación política y socialización (McAdam, 1989; Giugni, 2004), al proveer evidencia cuantitativa de heterogeneidad en los efectos transformadores de la participación según capital cultural y posición de clase. La participación no tiene efectos uniformes, sino que interactúa con estratificación social preexistente de maneras complejas. Tercero, contribuye a la literatura sobre desigualdad y violencia política (Stewart, 2002, 2008; Østby, 2013) al trasladar el enfoque de desigualdades horizontales desde conflictos civiles hacia actitudes sobre violencia en contextos de protesta masiva. Mientras la literatura de desigualdades horizontales se ha enfocado principalmente en conflictos armados entre grupos étnicos o regionales (Østby, 2013; Cederman et al., 2011), este estudio muestra que mecanismos similares —donde la posición grupal estructura tanto agravios como oportunidades para acción colectiva— operan en contextos de movilización social no armada. Sustantivamente, esto ilumina las bases sociales diferenciadas de la legitimación de violencia durante el estallido chileno de 2019: la amplitud transversal del movimiento se explica parcialmente por la transformación actitudinal de sectores profesionales y gerenciales que, al participar, desarrollaron marcos que legitimaban formas específicas de transgresión normativa.</p>
<p>El artículo se organiza en cinco secciones adicionales. La segunda sección desarrolla el marco teórico, revisando literatura sobre educación y actitudes políticas, participación como experiencia transformadora, y clase social como moderador estructural, derivando en las hipótesis específicas que guían la presente investigación. La tercera sección describe los datos, las variables utilizadas y la estrategia analítica utilizada. La cuarta sección presenta los resultados empíricos, documentando los cuatro hallazgos principales. La quinta sección discute las implicaciones teóricas, limitaciones del estudio y direcciones para investigación futura. Y finalmente, una sexta sección a modo de conclusión sobre las lecciones del caso chileno para la comprensión de la violencia política como fenómeno.</p>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>